<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Proposal</title>

<style>
*{box-sizing:border-box;}
html,body{margin:0;height:100%;font-family:'Segoe Script','Comic Sans MS',cursive;}

.page{
  position:fixed;
  inset:0;
  display:none;
}
.page.active{display:block;}

button{
  padding:10px 24px;
  font-size:1rem;
  margin:8px;
  cursor:pointer;
}

/* ---------- PAGE 1 ---------- */
#page1{
  background:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
}

/* ---------- PAGE 2 ---------- */
#page2{
  background:linear-gradient(135deg,#ff9acb,#ffd1e8,#ffe6f2);
  overflow:hidden;
  position:relative;
}

#hearts{
  position:absolute;
  inset:0;
  z-index:0;
  pointer-events:none;
}

.heart{
  position:absolute;
  top:-20px;
  font-size:20px;
  color:#ff69b4;
  opacity:0.35;
  animation:fall linear infinite;
}

@keyframes fall{
  to{transform:translateY(120vh);}
}

#page2Content{
  position:relative;
  z-index:2;
  height:100%;
  overflow-y:auto;
  padding:20px 16px 140px;
  text-align:center;
}

.msg{display:none;margin:60px auto;font-size:1.2rem;max-width:520px;}
.spacer{height:700px;}
#choices{display:none;margin-top:30px;}

/* ---------- PAGE 3 ---------- */
#page3{
  background:#000;
  color:#fff;
}
#ribbon{
  display:none;
  position:absolute;
  top:20px;
  right:20px;
  font-size:32px;
}
#p3text{
  display:none;
  position:absolute;
  bottom:30px;
  width:100%;
  text-align:center;
  font-size:1.2rem;
}

/* ---------- PAGE 4 ---------- */
#page4{
  background:#fff;
}
#drawCanvas{
  width:100%;
  height:100%;
  touch-action:none;
}
#drawHint{
  position:absolute;
  top:40%;
  width:100%;
  text-align:center;
  color:#777;
  font-size:1.2rem;
  pointer-events:none;
  transition:opacity .5s;
}

/* ---------- PAGE 5 ---------- */
#page5{
  background:linear-gradient(135deg,#ffafbd,#ffc3a0);
  color:#4a0033;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  opacity:0;
  transition:opacity 1.2s ease;
}
</style>
</head>

<body>

<!-- PAGE 1 -->
<div class="page active" id="page1">
  <div>
    <h1>Is it Dhikshika ?</h1>
    <button onclick="yesP1()">Yes</button>
    <button onclick="noP1()">No</button>
    <div id="noText"></div>
  </div>
</div>

<!-- PAGE 2 -->
<div class="page" id="page2">
  <div id="hearts"></div>

  <div id="page2Content">
    <h2>MADAM ORU GOOD NEWS</h2>

    <div class="msg" id="m1">
      oru valiya unga moon üåï ku suthi vara oru world üåç kedachitaga
    </div>

    <div class="msg" id="m2">
      Ungaluku tha na avagala first katanum nu nenaikura ...<br><br>
      So can you please scroll
    </div>

    <div class="spacer"></div>

    <div class="msg" id="m3">
      En Angel la pakkanum na oru condition...<br><br>
      Avaga Azhaga pathu neenga poramai pada kudathu
    </div>

    <div id="choices">
      <button onclick="goPage3()">Mm</button>
      <button onclick="noAngel()">Illa na pakkala</button>
      <div id="choiceNote"></div>
    </div>
  </div>
</div>

<!-- PAGE 3 -->
<div class="page" id="page3">
  <div id="ribbon">üéÄ</div>
  <div id="p3text">
    Pothum pothum ... Aprm en thangoo mela kannu patudum
  </div>
</div>

<!-- PAGE 4 -->
<div class="page" id="page4">
  <canvas id="drawCanvas"></canvas>
  <div id="drawHint">Draw a heart ‚ù§Ô∏è</div>
</div>

<!-- PAGE 5 -->
<div class="page" id="page5">
  <div>
    <h1 style="font-size:2.2rem;">Every line you draw‚Ä¶</h1>
    <p style="font-size:1.3rem;max-width:520px;">
      became the reason this moment exists üíï
    </p>
  </div>
</div>

<script>
function showPage(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

/* PAGE 1 */
function noP1(){
  document.getElementById('noText').innerText =
  'Madam neenga tha nu therium ennaku';
}

function yesP1(){
  showPage('page2');
  createHearts();

  ['m1','m2','m3'].forEach(i=>document.getElementById(i).style.display='none');
  document.getElementById('choices').style.display='none';
  document.getElementById('choiceNote').innerText='';

  setTimeout(()=>m1.style.display='block',5000);
  setTimeout(()=>m2.style.display='block',10000);
  setTimeout(()=>{
    m3.style.display='block';
    choices.style.display='block';
  },15000);
}

/* PAGE 2 */
function createHearts(){
  const h=document.getElementById('hearts');
  h.innerHTML='';
  for(let i=0;i<28;i++){
    const d=document.createElement('div');
    d.className='heart';
    d.innerHTML='‚ù§';
    d.style.left=(i*(100/28))+'vw';
    d.style.animationDuration=(9+Math.random()*5)+'s';
    d.style.animationDelay=(Math.random()*4)+'s';
    h.appendChild(d);
  }
}

function noAngel(){
  choiceNote.innerText='Aprm yen madam ivalo scroll panniga';
}

function goPage3(){
  showPage('page3');
  setTimeout(()=>{
    ribbon.style.display='block';
    p3text.style.display='block';
    page3.onclick=()=>showPage('page4');
  },5000);
}

/* PAGE 4 DRAW ‚Üí PAGE 5 */
const canvas=document.getElementById('drawCanvas');
const ctx=canvas.getContext('2d');
let drawing=false;
let strokeCount=0;
let done=false;

function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}
resize(); addEventListener('resize',resize);

canvas.addEventListener('pointerdown',()=>{
  drawing=true;
  drawHint.style.opacity=0;
});

canvas.addEventListener('pointerup',()=>{
  drawing=false;
  if(strokeCount>80 && !done){
    done=true;
    transitionToPage5();
  }
});

canvas.addEventListener('pointermove',e=>{
  if(!drawing) return;
  ctx.fillStyle='#ff5f9e';
  ctx.beginPath();
  ctx.arc(e.clientX,e.clientY,4,0,Math.PI*2);
  ctx.fill();
  strokeCount++;
});

function transitionToPage5(){
  page5.classList.add('active');
  page5.style.opacity=1;

  page4.style.transition='opacity 1.2s ease';
  page4.style.opacity=0;

  setTimeout(()=>{
    page4.classList.remove('active');
  },1200);
}
</script>

</body>
</html>
